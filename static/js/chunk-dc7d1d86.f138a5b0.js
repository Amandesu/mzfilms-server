(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-dc7d1d86"],{1276:function(t,i,n){"use strict";var e=n("d784"),a=n("44e7"),s=n("825a"),r=n("1d80"),l=n("4840"),o=n("8aa5"),c=n("50c4"),u=n("14c3"),p=n("9263"),h=n("d039"),g=[].push,f=Math.min,d=4294967295,m=!h((function(){return!RegExp(d,"y")}));e("split",2,(function(t,i,n){var e;return e="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(t,n){var e=String(r(this)),s=void 0===n?d:n>>>0;if(0===s)return[];if(void 0===t)return[e];if(!a(t))return i.call(e,t,s);var l,o,c,u=[],h=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),f=0,m=new RegExp(t.source,h+"g");while(l=p.call(m,e)){if(o=m.lastIndex,o>f&&(u.push(e.slice(f,l.index)),l.length>1&&l.index<e.length&&g.apply(u,l.slice(1)),c=l[0].length,f=o,u.length>=s))break;m.lastIndex===l.index&&m.lastIndex++}return f===e.length?!c&&m.test("")||u.push(""):u.push(e.slice(f)),u.length>s?u.slice(0,s):u}:"0".split(void 0,0).length?function(t,n){return void 0===t&&0===n?[]:i.call(this,t,n)}:i,[function(i,n){var a=r(this),s=void 0==i?void 0:i[t];return void 0!==s?s.call(i,a,n):e.call(String(a),i,n)},function(t,a){var r=n(e,t,this,a,e!==i);if(r.done)return r.value;var p=s(t),h=String(this),g=l(p,RegExp),b=p.unicode,v=(p.ignoreCase?"i":"")+(p.multiline?"m":"")+(p.unicode?"u":"")+(m?"y":"g"),w=new g(m?p:"^(?:"+p.source+")",v),y=void 0===a?d:a>>>0;if(0===y)return[];if(0===h.length)return null===u(w,h)?[h]:[];var T=0,I=0,S=[];while(I<h.length){w.lastIndex=m?I:0;var N,_=u(w,m?h:h.slice(I));if(null===_||(N=f(c(w.lastIndex+(m?0:I)),h.length))===T)I=o(h,I,b);else{if(S.push(h.slice(T,I)),S.length===y)return S;for(var F=1;F<=_.length-1;F++)if(S.push(_[F]),S.length===y)return S;I=T=N}}return S.push(h.slice(T)),S}]}),!m)},"2d35":function(t,i,n){},"2e18":function(t,i,n){},"44e7":function(t,i,n){var e=n("861d"),a=n("c6b6"),s=n("b622"),r=s("match");t.exports=function(t){var i;return e(t)&&(void 0!==(i=t[r])?!!i:"RegExp"==a(t))}},b05c:function(t,i,n){"use strict";n.r(i);var e=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{attrs:{id:"films"}},[e("div",{directives:[{name:"show",rawName:"v-show",value:t.isTop,expression:"isTop"}],staticClass:"topBar"},[e("nav-bar",[e("router-link",{attrs:{slot:"left",to:"/city"},slot:"left"},[e("div",{staticClass:"navLeft"},[t._v(" "+t._s(t.currentCity.name)+" "),e("img",{attrs:{src:n("6a05")}})])]),e("div",{attrs:{slot:"center"},slot:"center"},[t._v(" 电影 ")])],1),e("mid-tab-bar",{on:{changeNowTab:t.changeNowTab}})],1),e("div",{ref:"bscroll",staticClass:"bscroll"},[e("div",[e("router-link",{attrs:{to:"/city"}},[e("div",{staticClass:"currentCity"},[t._v(" "+t._s(t.currentCity.name)+" "),e("img",{attrs:{src:n("6a05")}})])]),e("swipper",{directives:[{name:"show",rawName:"v-show",value:t.isSwipperDisplay,expression:"isSwipperDisplay"}],attrs:{imgs:t.bannerImg}}),e("mid-tab-bar",{on:{changeNowTab:t.changeNowTab}}),e("router-view")],1)]),e("main-tab-bar")],1)},a=[],s=(n("ac1f"),n("1276"),n("5530")),r=n("8f0e"),l=n("7068"),o=function(){var t=this,i=t.$createElement,n=t._self._c||i;return n("div",{attrs:{id:"swipper"}},[n("swiper",{attrs:{options:t.swiperOption}},[t._l(t.imgs,(function(t){return n("swiper-slide",{key:t.bannerId},[n("img",{attrs:{src:t.imgUrl,alt:""}})])})),n("div",{staticClass:"swiper-pagination",attrs:{slot:"pagination"},slot:"pagination"})],2)],1)},c=[],u=n("7212");n("dfa4");var p={name:"Swipper",components:{swiper:u["swiper"],swiperSlide:u["swiperSlide"]},props:{imgs:{type:Array,default:function(){return[]}}},data:function(){return{swiperOption:{loop:!0,autoplay:{delay:1e3,stopOnLastSlide:!1,disableOnInteraction:!1},autoplayDisableOnInteraction:!1,speed:800,initialSlide:0,pagination:{el:".swiper-pagination",clickable:!0,type:"bullets"}}}}},h=p,g=(n("de9a"),n("2877")),f=Object(g["a"])(h,o,c,!1,null,"49b3478e",null),d=f.exports,m=function(){var t=this,i=t.$createElement,n=t._self._c||i;return n("div",{attrs:{id:"midTabBar"}},[n("tab-bar",[n("tab-bar-item",{attrs:{path:"/films/nowPlaying"},nativeOn:{click:function(i){return t.changeNowTab(t.nowPlaying)}}},[n("span",[t._v("正在热映")])]),n("tab-bar-item",{attrs:{path:"/films/comingSoon"},nativeOn:{click:function(i){return t.changeNowTab(t.comingSoon)}}},[n("span",[t._v("即将上映")])])],1)],1)},b=[],v=n("010f"),w=n("8f50"),y={name:"MidTabBar",components:{TabBar:v["a"],TabBarItem:w["a"]},data:function(){return{nowPlaying:"nowPlaying",comingSoon:"comingSoon"}},methods:{changeNowTab:function(t){this.$emit("changeNowTab",t)}}},T=y,I=(n("d9a7"),Object(g["a"])(T,m,b,!1,null,"1fe8be49",null)),S=I.exports,N=n("1bab"),_=function(t,i){var n=Date.now();return function(){var e=Date.now();if(e-n>=i){for(var a=arguments.length,s=new Array(a),r=0;r<a;r++)s[r]=arguments[r];t.apply(this,s),n=Date.now()}}},F=n("1fba"),x=n("2f62"),M={name:"Films",components:{NavBar:r["a"],MainTabBar:l["a"],Swipper:d,MidTabBar:S},data:function(){return{isTop:!1,bannerImg:[],nowTab:"nowPlaying",pageNum1:1,pageNum2:1,scroll:null}},created:function(){"/films/nowPlaying"===this.$route.path?this.getFilms(this.pageNum1,1,this.GET_FILMS):this.getFilms(this.pageNum1,2,this.GET_FILMS),this.getBannerImg()},mounted:function(){var t=this;this.scroll=new F["a"](this.$refs.bscroll,{probeType:1,click:!0,scrollbar:!0,mouseWheel:!0,pullUpLoad:{threshold:50}});var i=_((function(i){-i.y>192?t.isTop=!0:t.isTop=!1}),100);this.scroll.on("scroll",(function(t){i(t)})),"nowPlaying"===this.nowTab?this.scrollToGetMoreFilms(this.pageNum1,1):this.scrollToGetMoreFilms(this.pageNum2,2)},computed:Object(s["a"])({},Object(x["c"])(["currentCity","films"]),{isSwipperDisplay:function(){return!!this.bannerImg}}),methods:Object(s["a"])({},Object(x["b"])(["GET_FILMS","PUSH_FILMS"]),{getBannerImg:function(){var t=this;Object(N["a"])("mall.cfg.common-banner",{type:2,cityId:this.currentCity.cityId,k:9458745}).then((function(i){return t.bannerImg=i.data.data}))},getFilms:function(t,i,n){return Object(N["a"])("mall.film-ticket.film.list",{cityId:this.currentCity.cityId,pageNum:t,pageSize:10,type:i,k:127927}).then((function(t){return n(t.data.data.films)}))},scrollToGetMoreFilms:function(t,i){var n=this;this.scroll.on("pullingUp",(function(){n.getFilms(++t,i,n.PUSH_FILMS).then((function(){n.scroll.finishPullUp(),n.scroll.refresh()}))}))},changeNowTab:function(t){this.GET_FILMS([]),"nowPlaying"===t?this.getFilms(this.pageNum1,1,this.GET_FILMS):this.getFilms(this.pageNum1,2,this.GET_FILMS),this.scroll.off("pullingUp"),this.isTop=!1;var i=this.$route.path.split("/").length;this.nowTab=this.$route.path.split("/")[i-1],"nowPlaying"===this.nowTab?this.scrollToGetMoreFilms(this.pageNum1,1):this.scrollToGetMoreFilms(this.pageNum2,2)}})},O=M,k=(n("fa4c"),Object(g["a"])(O,e,a,!1,null,"3f9ff735",null));i["default"]=k.exports},d9a7:function(t,i,n){"use strict";var e=n("2d35"),a=n.n(e);a.a},ddc1:function(t,i,n){},de9a:function(t,i,n){"use strict";var e=n("2e18"),a=n.n(e);a.a},fa4c:function(t,i,n){"use strict";var e=n("ddc1"),a=n.n(e);a.a}}]);
//# sourceMappingURL=chunk-dc7d1d86.f138a5b0.js.map