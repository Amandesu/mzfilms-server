(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-e0a15c02"],{1276:function(t,n,i){"use strict";var e=i("d784"),a=i("44e7"),r=i("825a"),s=i("1d80"),l=i("4840"),o=i("8aa5"),c=i("50c4"),u=i("14c3"),p=i("9263"),h=i("d039"),g=[].push,d=Math.min,f=4294967295,m=!h((function(){return!RegExp(f,"y")}));e("split",2,(function(t,n,i){var e;return e="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(t,i){var e=String(s(this)),r=void 0===i?f:i>>>0;if(0===r)return[];if(void 0===t)return[e];if(!a(t))return n.call(e,t,r);var l,o,c,u=[],h=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),d=0,m=new RegExp(t.source,h+"g");while(l=p.call(m,e)){if(o=m.lastIndex,o>d&&(u.push(e.slice(d,l.index)),l.length>1&&l.index<e.length&&g.apply(u,l.slice(1)),c=l[0].length,d=o,u.length>=r))break;m.lastIndex===l.index&&m.lastIndex++}return d===e.length?!c&&m.test("")||u.push(""):u.push(e.slice(d)),u.length>r?u.slice(0,r):u}:"0".split(void 0,0).length?function(t,i){return void 0===t&&0===i?[]:n.call(this,t,i)}:n,[function(n,i){var a=s(this),r=void 0==n?void 0:n[t];return void 0!==r?r.call(n,a,i):e.call(String(a),n,i)},function(t,a){var s=i(e,t,this,a,e!==n);if(s.done)return s.value;var p=r(t),h=String(this),g=l(p,RegExp),b=p.unicode,v=(p.ignoreCase?"i":"")+(p.multiline?"m":"")+(p.unicode?"u":"")+(m?"y":"g"),w=new g(m?p:"^(?:"+p.source+")",v),y=void 0===a?f:a>>>0;if(0===y)return[];if(0===h.length)return null===u(w,h)?[h]:[];var T=0,I=0,S=[];while(I<h.length){w.lastIndex=m?I:0;var N,_=u(w,m?h:h.slice(I));if(null===_||(N=d(c(w.lastIndex+(m?0:I)),h.length))===T)I=o(h,I,b);else{if(S.push(h.slice(T,I)),S.length===y)return S;for(var x=1;x<=_.length-1;x++)if(S.push(_[x]),S.length===y)return S;I=T=N}}return S.push(h.slice(T)),S}]}),!m)},"2d35":function(t,n,i){},"2e18":function(t,n,i){},"44e7":function(t,n,i){var e=i("861d"),a=i("c6b6"),r=i("b622"),s=r("match");t.exports=function(t){var n;return e(t)&&(void 0!==(n=t[s])?!!n:"RegExp"==a(t))}},b05c:function(t,n,i){"use strict";i.r(n);var e=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{attrs:{id:"films"}},[e("div",{directives:[{name:"show",rawName:"v-show",value:t.isTop,expression:"isTop"}],staticClass:"topBar"},[e("nav-bar",[e("router-link",{attrs:{slot:"left",to:"/city"},slot:"left"},[e("div",{staticClass:"navLeft"},[t._v(" "+t._s(t.currentCity.name)+" "),e("img",{attrs:{src:i("6a05")}})])]),e("div",{attrs:{slot:"center"},slot:"center"},[t._v(" 电影 ")])],1),e("mid-tab-bar",{on:{changeNowTab:t.changeNowTab}})],1),e("div",{ref:"bscroll",staticClass:"bscroll"},[e("div",[e("router-link",{attrs:{to:"/city"}},[e("div",{staticClass:"currentCity"},[t._v(" "+t._s(t.currentCity.name)+" "),e("img",{attrs:{src:i("6a05")}})])]),e("swipper",{directives:[{name:"show",rawName:"v-show",value:t.isSwipperDisplay,expression:"isSwipperDisplay"}],attrs:{imgs:t.bannerImg}}),e("mid-tab-bar",{on:{changeNowTab:t.changeNowTab}}),e("router-view")],1)]),e("main-tab-bar")],1)},a=[],r=(i("ac1f"),i("1276"),i("5530")),s=i("8f0e"),l=i("7068"),o=function(){var t=this,n=t.$createElement,i=t._self._c||n;return i("div",{attrs:{id:"swipper"}},[i("swiper",{attrs:{options:t.swiperOption}},[t._l(t.imgs,(function(t){return i("swiper-slide",{key:t.bannerId},[i("img",{attrs:{src:t.imgUrl,alt:""}})])})),i("div",{staticClass:"swiper-pagination",attrs:{slot:"pagination"},slot:"pagination"})],2)],1)},c=[],u=i("7212");i("dfa4");var p={name:"Swipper",components:{swiper:u["swiper"],swiperSlide:u["swiperSlide"]},props:{imgs:{type:Array,default:function(){return[]}}},data:function(){return{swiperOption:{loop:!0,autoplay:{delay:1e3,stopOnLastSlide:!1,disableOnInteraction:!1},autoplayDisableOnInteraction:!1,speed:800,initialSlide:0,pagination:{el:".swiper-pagination",clickable:!0,type:"bullets"}}}}},h=p,g=(i("de9a"),i("2877")),d=Object(g["a"])(h,o,c,!1,null,"49b3478e",null),f=d.exports,m=function(){var t=this,n=t.$createElement,i=t._self._c||n;return i("div",{attrs:{id:"midTabBar"}},[i("tab-bar",[i("tab-bar-item",{attrs:{path:"/films/nowPlaying"},nativeOn:{click:function(n){return t.changeNowTab(t.nowPlaying)}}},[i("span",[t._v("正在热映")])]),i("tab-bar-item",{attrs:{path:"/films/comingSoon"},nativeOn:{click:function(n){return t.changeNowTab(t.comingSoon)}}},[i("span",[t._v("即将上映")])])],1)],1)},b=[],v=i("010f"),w=i("8f50"),y={name:"MidTabBar",components:{TabBar:v["a"],TabBarItem:w["a"]},data:function(){return{nowPlaying:"nowPlaying",comingSoon:"comingSoon"}},methods:{changeNowTab:function(t){this.$emit("changeNowTab",t)}}},T=y,I=(i("d9a7"),Object(g["a"])(T,m,b,!1,null,"1fe8be49",null)),S=I.exports,N=i("1bab"),_=function(t,n){var i=Date.now();return function(){var e=Date.now();if(e-i>=n){for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];t.apply(this,r),i=Date.now()}}},x=i("1fba"),O=i("2f62"),k={name:"Films",components:{NavBar:s["a"],MainTabBar:l["a"],Swipper:f,MidTabBar:S},data:function(){return{isTop:!1,bannerImg:[],nowTab:"nowPlaying",pageNum1:1,pageNum2:1,scroll:null}},created:function(){this.getFilms(this.pageNum1,1,this.GET_FILMS),this.getBannerImg()},mounted:function(){var t=this;this.scroll=new x["a"](this.$refs.bscroll,{probeType:1,click:!0,scrollbar:!0,mouseWheel:!0,pullUpLoad:{threshold:50}});var n=_((function(n){-n.y>192?t.isTop=!0:t.isTop=!1}),100);this.scroll.on("scroll",(function(t){n(t)}));var i=this.$route.path.split("/").length;this.nowTab=this.$route.path.split("/")[i-1],"nowPlaying"===this.nowTab?this.scrollToGetMoreFilms(this.pageNum1,1):this.scrollToGetMoreFilms(this.pageNum2,2)},computed:Object(r["a"])({},Object(O["c"])(["currentCity","films"]),{isSwipperDisplay:function(){return!!this.bannerImg}}),methods:Object(r["a"])({},Object(O["b"])(["GET_FILMS","PUSH_FILMS"]),{getBannerImg:function(){var t=this;Object(N["a"])("mall.cfg.common-banner",{type:2,cityId:this.currentCity.cityId,k:9458745}).then((function(n){return t.bannerImg=n.data.data}))},getFilms:function(t,n,i){return Object(N["a"])("mall.film-ticket.film.list",{cityId:this.currentCity.cityId,pageNum:t,pageSize:10,type:n,k:127927}).then((function(t){return i(t.data.data.films)}))},scrollToGetMoreFilms:function(t,n){var i=this;this.scroll.on("pullingUp",(function(){i.getFilms(++t,n,i.PUSH_FILMS).then((function(){i.scroll.finishPullUp(),i.scroll.refresh()}))}))},changeNowTab:function(t){"nowPlaying"===t?this.getFilms(this.pageNum1,1,this.GET_FILMS):this.getFilms(this.pageNum1,2,this.GET_FILMS)}})},F=k,C=(i("d4fb"),Object(g["a"])(F,e,a,!1,null,"47df4a50",null));n["default"]=C.exports},d4fb:function(t,n,i){"use strict";var e=i("e467"),a=i.n(e);a.a},d9a7:function(t,n,i){"use strict";var e=i("2d35"),a=i.n(e);a.a},de9a:function(t,n,i){"use strict";var e=i("2e18"),a=i.n(e);a.a},e467:function(t,n,i){}}]);
//# sourceMappingURL=chunk-e0a15c02.d1624818.js.map